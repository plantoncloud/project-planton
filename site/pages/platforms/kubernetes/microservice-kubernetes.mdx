# Deploy Microservice on Kubernetes

```yaml
apiVersion: kubernetes.project.planton/v1
kind: MicroserviceKubernetes
metadata:
  name: my-web-app
  #metadata.id is used for naming the namespace
  #if metadata.id is not specified metadata.name is used for naming namespace
  id: my-web-app-dev-main
spec:
  version: main
  availability:
    minReplicas: 1
  container:
    app:
      env:
        secrets:
          KAFKA_PASSWORD: <secret-id-on-secrets-manager>
        variables:
          KAFKA_BOOTSTRAP_SERVER: <kafka-bootstrap-server-hostname>
      image:
        repo: nginx
        tag: latest
      ports:
        - appProtocol: http
          containerPort: 8080
          isIngressPort: true
          name: nginx
          networkProtocol: TCP
          servicePort: 80
      resources:
        limits:
          cpu: 2000m
          memory: 4Gi
        requests:
          cpu: 60m
          memory: 100Mi
  ingress:
    isEnabled: true
    #final ingress endpoint would be <metadata.id>.<spec.ingress.endpointDomainName>
    #if metadata.id is not provided metadata.name is used in place of metadata.id
    endpointDomainName: example.com
```
